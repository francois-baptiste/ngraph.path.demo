{"version":3,"sources":["webpack:///./src/components/About.vue?c72b","webpack:///./src/appModel.js","webpack:///./src/bus.js","webpack:///./src/BBox.js","webpack:///./src/settings.js","webpack:///./src/lib/RouteHandleViewModel.js","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/lib/loadGraph.js","webpack:///./src/SVGContainer.js","webpack:///src/components/About.vue","webpack:///./src/components/About.vue","webpack:///./src/App.vue?f4c4","webpack:///src/components/RoutePoint.vue","webpack:///./src/lib/Progress.js","webpack:///./src/components/RoutePoint.vue","webpack:///./src/components/RoutePoint.vue?362a","webpack:///./src/lib/request.js","webpack:///src/App.vue"],"names":["esExports","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","$event","preventDefault","close","_v","attrs","href","_m","staticRenderFns","target","__webpack_exports__","createTree","require","npath","loadGraph","Progress","RouteHandleViewModel","getSettings","queryState","bus","qs","graph","onChange","fromId","routeStart","pointId","toId","routeEnd","setCurrentSearchFromQueryState","updateRoute","graphBBox","hetTestTree","pathFinder","pathFindersLookup","pendingQueryStringUpdate","findNearestPoint","stats","visible","lastSearchTook","pathLength","graphNodeCount","graphLinksCount","settings","api","loadPositions","updateSearchAlgorithm","setCurrentPathFinder","set","pathFinderSettings","selected","updateSelectedGraph","graphSettings","clearRoute","getGraph","getGraphBBox","progress","pathInfo","svgPath","noPath","handleSceneClick","e","setRoutePointFormEvent","getRouteHandleUnderCursor","scene","scale","getTransform","getPixelRatio","intersects","sceneX","sceneY","clearTimeout","setTimeout","get","updateQueryString","points","start","window","performance","now","path","find","findPath","end","length","map","l","data","pt","index","p","x","y","join","Math","round","totalLength","i","dataDistance","numberWithCommas","getPathLength","clear","routePointViewModel","point","Error","setFrom","graphName","reset","then","setApplicationModelVariables","catch","setError","loaded","loadedPoints","initAsync","total","message","completed","done","treeReady","a-greedy-star","aGreedy","distance","heuristic","nba","astar-uni","aStar","dijkstra","getNodesCount","getLinksCount","fire","pathFinderName","from","getNode","to","toString","replace","maxDistanceToExplore","arguments","undefined","pointsAround","idx","sort","a","b","pointDistance","src","dx","dy","sqrt","fromNode","toNode","links","id","module","exports","eventify","BBox","_classCallCheck3","default","minX","Number","POSITIVE_INFINITY","minY","maxX","NEGATIVE_INFINITY","maxY","offset","xIn","yIn","rect","addPoint","left","top","right","bottom","otherBBox","graphs","value","name","getAvailableGraphs","algorithms","getAvailablePathfinders","pointChangedCallback","beingDragged","r","pointChanged","touchId","self","onMouseMove","stopPropagation","clientX","clientY","touches","mainTouch","identifier","s","getSceneCoordinate","onMouseUp","document","removeEventListener","addEventListener","capture","passive","graphNode","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default","n","__WEBPACK_IMPORT_KEY__","key","d","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_58b8de72_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","__vue_styles__","ssrContext","Component","normalizeComponent","Vue","config","productionTip","el","template","components","App","request","endpoint","createGraph","asyncFor","fileName","responseType","reportProgress","buffer","Int32Array","console","log","time","_promise2","resolve","addPointToGraph","pointsReady","timeEnd","step","initNodes","setLinks","nodeId","floor","addNode","addLinkToGraph","linksReady","fromShifted","weight","addLink","percent","SVGContainer","groupElement","drawCallback","_this","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","g","noop","transform","worldTransform","world","ours","pixelRatio","setAttributeNS","Element","mounted","closeHandler","keyCode","beforeDestroy","methods","$emit","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_About_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_About_vue___default","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_6579c796_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_About_vue__","ref","webGLEnabled","_e","stroke-width","stroke","fill","symbol","fontSize","errorMessage","_s","errorDetails","getHelpText","helpVisible","viewBox","detailsVisible","strokeWidth","textY","text-anchor","font-size","pathText","directives","rawName","expression","change","$$selectedVal","Array","prototype","filter","options","o","_value","$set","multiple","_l","algorithm","domProps","title","graphNameTitle","updateGraph","aboutVisible","frameborder","allowfullscreen","props","String","type","computed","screenScale","details","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RoutePoint_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RoutePoint_vue___default","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_a925d368_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_RoutePoint_vue__","url","reject","req","XMLHttpRequest","lengthComputable","status","response","JSON","parse","open","send","wgl","RoutePoint","_RoutePoint2","About","_About2","isWebGLEnabled","$refs","canvas","_appModel2","createScene","off","ensurePreviousSceneDestroyed","dispose","unsubscribeMoveEvents","svgConntainer","_SVGContainer2","svg","querySelector","updateSVGElements","bind","appendChild","setClearColor","initialSceneSize","width","setViewBox","linksCount","lines","WireCollection","color","forEachLink","link","add","onMouseMoveOverScene","onSceneClick","boundMouseDown","handleMouseDown","body","foundPath","changedTouches","handleUnderCursor","startDragging","Date","handle","prevHandle","style","cursor"],"mappings":"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","file":"static/js/app.90e294dbd932a6a3a193.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('div',{staticClass:\"background absolute\",on:{\"click\":function($event){$event.preventDefault();return _vm.close($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('h3',[_vm._v(\"ngraph.path \"),_c('a',{staticClass:\"close bold\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.close($event)}}},[_vm._v(\"close\")])]),_vm._v(\" \"),_vm._m(0),_c('p',[_vm._v(\"\\n      Don't use this website for actual navigation :).\\n    \")]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_vm._m(3),_vm._v(\" \"),_vm._m(4),_vm._v(\" \"),_c('a',{staticClass:\"large-close bold\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.close($event)}}},[_vm._v(\"\\n      close\\n    \")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n      This website is a demo for the \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"ngraph.path\")]),_vm._v(\"\\n      library. The library implements pathfinding algorithms for generic graphs (not limited to grids).\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"My goal was to build a very fast library, that could help many developers\\n      find their paths. In my tests, the library showed great performance with median\\n      path finding speed \"),_c('span',{staticClass:\"bold\"},[_vm._v(\"34ms\")]),_vm._v(\" on \"),_c('span',{staticClass:\"bold\"},[_vm._v(\"733,844\")]),_vm._v(\" edges graph.\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"I built the roads graph for this demo using amazing \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"http://www.openstreetmap.org/\",\"target\":\"_blank\"}},[_vm._v(\"OpenStreetMap\")]),_vm._v(\".\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"Learn more \")]),_vm._v(\" about this project on GitHub\\n      \")]),_c('li',[_vm._v(\"\\n      Stay tuned for updates on \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"Twitter.\")])]),_c('li',[_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://www.youtube.com/watch?v=hGeZuIEV6KU\"}},[_vm._v(\" Watch a video\")]),_vm._v(\" demo.\\n      \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"With passion,\"),_c('br'),_vm._v(\" Anvaka\")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6579c796\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/About.vue\n// module id = /wTR\n// module chunks = 1","/**\n * This is the main application model.\n */\nconst createTree = require('yaqt');\nconst npath = require('ngraph.path'); // the pathfinders\n\nconst loadGraph = require('./lib/loadGraph'); // loads graph asynchronously\nconst Progress = require('./lib/Progress'); // notifies UI about loading progress\n\n// This is a state for two dots A and B on the UI\nconst RouteHandleViewModel = require('./lib/RouteHandleViewModel');\n\n// We use a few options in the UI (available path finders, available graphs)\nconst getSettings = require('./settings.js')\n\n// Some state is shared in the query string (start/end of the route)\nconst queryState = require('query-state');\n\n// And this is how the state communicates asynchronously with App.vue\nconst bus = require('./bus');\n\n// Now that we are done with imports, lets initialize the state.\n\n// First of all, read what we currently have in the query string.\nconst qs = queryState({\n  graph: 'h3_face_uk'\n});\n\nqs.onChange(updateStateFromQueryString);\n\nlet graph;      // current graph\nlet graphBBox;  // current bounding box for a graph\nlet hetTestTree;       // this tree helps us find graph node under cursor\nlet pathFinder;        // currently selected pathfinder\nlet pathFindersLookup; // initialized after we load graph\n\nlet pendingQueryStringUpdate = 0; // Used to throttle query string updates.\n\nlet routeStart = new RouteHandleViewModel(updateRoute, findNearestPoint);\nlet routeEnd = new RouteHandleViewModel(updateRoute, findNearestPoint);\n\nlet stats = {\n  visible: false,\n  lastSearchTook: 0,\n  pathLength: 0,\n  graphNodeCount: '',\n  graphLinksCount: ''\n};\n\nlet settings = getSettings(qs);\n\nconst api = {\n  loadPositions,\n\n  updateSearchAlgorithm,\n  updateSelectedGraph,\n\n  getGraph,\n  getGraphBBox,\n\n  progress: new Progress(),\n  stats,\n\n  routeStart,\n  routeEnd,\n  pathInfo: {\n    svgPath: '',\n    noPath: false\n  },\n\n  handleSceneClick,\n  getRouteHandleUnderCursor,\n  clearRoute,\n\n  pathFinderSettings: settings.pathFinderSettings,\n  graphSettings: settings.graphSettings\n}\n\nmodule.exports = api;\n\n// The app model is ready at this point.\n\nfunction updateStateFromQueryString(queryState) {\n  let searchChanged = (queryState.fromId !== routeStart.pointId) ||\n                      (queryState.toId !== routeEnd.pointId);\n\n  if (searchChanged) {\n    setCurrentSearchFromQueryState();\n    updateRoute();\n  }\n}\n\n\n/**\n * This method sets a new pathfinder, according to currently selected\n * drop down option from `pathFinderSettings`\n */\nfunction updateSearchAlgorithm() {\n  setCurrentPathFinder();\n  qs.set('finder', settings.pathFinderSettings.selected);\n  updateRoute();\n}\n\nfunction getRouteHandleUnderCursor(e, scene) {\n  let transform = scene.getTransform();\n  let scale = transform.scale/scene.getPixelRatio();\n\n  if (routeStart.intersects(e.sceneX, e.sceneY, scale)) {\n    return routeStart;\n  }\n  if (routeEnd.intersects(e.sceneX, e.sceneY, scale)) {\n    return routeEnd;\n  }\n}\n\nfunction getGraphBBox() {\n  return graphBBox;\n}\n\nfunction updateRoute() {\n  if (!(routeStart.visible && routeEnd.visible)) {\n    api.pathInfo.svgPath = '';\n    return;\n  }\n\n  let fromId = routeStart.pointId;\n  let toId = routeEnd.pointId;\n  updateQueryString();\n\n  let start = window.performance.now();\n  let path = findPath(fromId, toId);\n  let end = window.performance.now() - start;\n\n  api.pathInfo.noPath = path.length === 0;\n  api.pathInfo.svgPath = getSvgPath(path.map(l => l.data));\n\n  stats.lastSearchTook = (Math.round(end * 100)/100) + 'ms';\n  stats.pathLength = getPathLength(path);\n  stats.visible = true;\n}\n\nfunction updateQueryString() {\n  if (pendingQueryStringUpdate) {\n    // iOS doesn't like when we update query string too often.\n    // need to throttle\n    clearTimeout(pendingQueryStringUpdate);\n    pendingQueryStringUpdate = 0;\n  }\n\n  pendingQueryStringUpdate = setTimeout(() => {\n    pendingQueryStringUpdate = 0;\n    if(!(routeStart.visible && routeEnd.visible)) return;\n\n    let fromId = routeStart.pointId;\n    let toId = routeEnd.pointId;\n    if (qs.get('fromId') != fromId) {\n      qs.set('fromId', fromId)\n    }\n    if (qs.get('toId') !== toId) {\n      qs.set('toId', toId);\n    }\n  }, 400);\n}\n\nfunction getPathLength(path) {\n  let totalLength = 0;\n  for (let i = 1; i < path.length; ++i) {\n    totalLength += dataDistance(path[i - 1], path[i]);\n  }\n  return numberWithCommas(Math.round(totalLength));\n}\n\nfunction clearRoute() {\n  routeStart.clear();\n  routeEnd.clear();\n  qs.set({\n    fromId: -1,\n    toId: -1\n  });\n}\n\nfunction handleSceneClick(e) {\n  if (!routeStart.visible) {\n    setRoutePointFormEvent(e, routeStart);\n  } else if (!routeEnd.visible) {\n    setRoutePointFormEvent(e, routeEnd);\n  }\n}\n\nfunction setRoutePointFormEvent(e, routePointViewModel) {\n  if (!hetTestTree) return; // we are not initialized yet.\n\n  let point = findNearestPoint(e.sceneX, e.sceneY)\n  if (!point) throw new Error('Point should be defined at this moment');\n\n  routePointViewModel.setFrom(point);\n}\n\nfunction loadPositions() {\n  let graphName = qs.get('graph');\n  hetTestTree = null;\n  graph = null;\n  stats.visible = false;\n  api.progress.reset();\n\n  loadGraph(graphName, api.progress).then(setApplicationModelVariables)\n  .catch((e) => {\n    api.progress.setError('Could not load the graph', e);\n  });\n}\n\nfunction setApplicationModelVariables(loaded) {\n  graph = loaded.graph;\n  graphBBox = loaded.graphBBox;\n  pathFinder = null;\n\n  initHitTestTree(loaded.points);\n  initPathfinders();\n\n  stats.graphNodeCount = numberWithCommas(graph.getNodesCount());\n  stats.graphLinksCount = numberWithCommas(graph.getLinksCount());\n  bus.fire('graph-loaded')\n  setTimeout(() => {\n    // in case if we have path in the query string\n    updateRoute();\n  }, 0);\n}\n\nfunction initHitTestTree(loadedPoints) {\n  hetTestTree = createTree();\n  hetTestTree.initAsync(loadedPoints, {\n    progress(i, total) {\n      if (i % 500 !== 0) return;\n\n      api.progress.message = 'Initializing tree for point & click'\n      api.progress.completed = Math.round(100 * i/total) + '%';\n    },\n    done() {\n      api.progress.treeReady = true;\n    }\n  });\n}\n\n\n\nfunction initPathfinders() {\n  pathFindersLookup = {\n    'a-greedy-star': npath.aGreedy(graph, {\n      distance: distance,\n      heuristic: heuristic\n    }),\n    'nba': npath.nba(graph, {\n      distance: distance,\n      heuristic: heuristic\n    }),\n    'astar-uni': npath.aStar(graph, {\n      distance: distance,\n      heuristic: heuristic\n    }),\n    'dijkstra': npath.aStar(graph, {\n      distance: distance\n    }),\n  }\n\n  setCurrentPathFinder()\n  setCurrentSearchFromQueryState();\n}\n\nfunction setCurrentPathFinder() {\n  let pathFinderName = settings.pathFinderSettings.selected;\n  pathFinder = pathFindersLookup[pathFinderName];\n  if (!pathFinder) {\n    throw new Error('Cannot find pathfinder ' + pathFinderName);\n  }\n}\n\nfunction setCurrentSearchFromQueryState() {\n  if (!graph) return;\n\n  let fromId = qs.get('fromId');\n  let toId = qs.get('toId');\n  let from = graph.getNode(fromId)\n  let to = graph.getNode(toId)\n  if (from) routeStart.setFrom(from)\n  if (to) routeEnd.setFrom(to)\n}\n\nfunction updateSelectedGraph() {\n  qs.set({\n    graph: settings.graphSettings.selected,\n    fromId: -1,\n    toId: -1\n  });\n\n  loadPositions();\n  clearRoute();\n}\n\nfunction numberWithCommas(x) {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction findPath(fromId, toId) {\n  return pathFinder.find(fromId, toId);\n}\n\nfunction getSvgPath(points) {\n  if (points.length < 1) return '';\n\n  return points.map((pt, index) => {\n    let prefix = (index === 0) ? 'M' : ''\n    return prefix + toPoint(pt);\n  }).join(' ');\n}\n\nfunction toPoint(p) { return p.x + ',' + p.y }\n\nfunction getGraph() {\n  return graph;\n}\n\nfunction findNearestPoint(x, y, maxDistanceToExplore = 2000) {\n  if (!hetTestTree) return;\n\n  let points = hetTestTree.pointsAround(x, y, maxDistanceToExplore).map(idx => graph.getNode(idx/2))\n  .sort((a, b) => {\n    let da = pointDistance(a.data, x, y);\n    let db = pointDistance(b.data, x, y)\n    return da - db;\n  });\n\n  if (points.length > 0) {\n    return points[0];\n  } else {\n    // keep trying.\n    return findNearestPoint(x, y, maxDistanceToExplore * 2);\n  }\n}\n\nfunction pointDistance(src, x, y) {\n  let dx = src.x - x;\n  let dy = src.y - y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction distance(fromNode, toNode) {\n  for (let i = 0; i < fromNode.links.length; ++i) {\n    if (fromNode.links[i].fromId == toNode.id) return fromNode.links[i].data[\"weight\"];\n    if (fromNode.links[i].toId == toNode.id) return fromNode.links[i].data[\"weight\"];\n  }\n}\n\nfunction heuristic(fromNode, toNode) {\n  for (let i = 0; i < fromNode.links.length; ++i) {\n    if (fromNode.links[i].fromId == toNode.id) return fromNode.links[i].data[\"weight\"];\n    if (fromNode.links[i].toId == toNode.id) return fromNode.links[i].data[\"weight\"];\n  }\n}\n\nfunction dataDistance(fromNode, toNode) {\n  for (let i = 0; i < fromNode.links.length; ++i) {\n    if (fromNode.links[i].fromId == toNode.id) return fromNode.links[i].data[\"weight\"];\n    if (fromNode.links[i].toId == toNode.id) return fromNode.links[i].data[\"weight\"];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/appModel.js","var eventify = require('ngraph.events');\r\nvar bus = eventify({});\r\n\r\nmodule.exports = bus;\n\n\n// WEBPACK FOOTER //\n// ./src/bus.js","class BBox {\r\n  constructor() {\r\n    this.minX = Number.POSITIVE_INFINITY;\r\n    this.minY = Number.POSITIVE_INFINITY;\r\n    this.maxX = Number.NEGATIVE_INFINITY;\r\n    this.maxY = Number.NEGATIVE_INFINITY;\r\n  }\r\n\r\n  growBy(offset) {\r\n    this.minX -= offset;\r\n    this.minY -= offset;\r\n    this.maxX += offset;\r\n    this.maxY += offset;\r\n  }\r\n\r\n  get left() {\r\n    return this.minX;\r\n  }\r\n\r\n  get top() {\r\n    return this.minY;\r\n  }\r\n\r\n  get right() {\r\n    return this.maxX;\r\n  }\r\n\r\n  get bottom() {\r\n    return this.maxY;\r\n  }\r\n\r\n  get width() {\r\n    return this.maxX - this.minX;\r\n  }\r\n\r\n  get height() {\r\n    return this.maxY - this.minY;\r\n  }\r\n\r\n  get cx() {\r\n    return (this.minX + this.maxX)/2;\r\n  }\r\n\r\n  get cy() {\r\n    return (this.minY + this.maxY)/2;\r\n  }\r\n\r\n  addPoint(xIn, yIn) {\r\n    if (xIn === undefined) throw new Error('Point is not defined');\r\n    let x = xIn;\r\n    let y = yIn;\r\n    if (y === undefined) {\r\n      // xIn is a point object\r\n      x = xIn.x;\r\n      y = xIn.y;\r\n    }\r\n\r\n    if (x < this.minX) this.minX = x;\r\n    if (x > this.maxX) this.maxX = x;\r\n    if (y < this.minY) this.minY = y;\r\n    if (y > this.maxY) this.maxY = y;\r\n  }\r\n\r\n  addRect(rect) {\r\n    if (!rect) throw new Error('rect is not defined');\r\n    this.addPoint(rect.left, rect.top);\r\n    this.addPoint(rect.right, rect.top);\r\n    this.addPoint(rect.left, rect.bottom);\r\n    this.addPoint(rect.right, rect.bottom);\r\n  }\r\n\r\n  merge(otherBBox) {\r\n    if (otherBBox.minX < this.minX) this.minX = otherBBox.minX;\r\n    if (otherBBox.minY < this.minY) this.minY = otherBBox.minY;\r\n    if (otherBBox.maxX > this.maxX) this.maxX = otherBBox.maxX;\r\n    if (otherBBox.maxY > this.maxY) this.maxY = otherBBox.maxY;\r\n  }\r\n}\r\n\r\nmodule.exports = BBox;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/BBox.js","module.exports = getSettings\n\nfunction getSettings(qs) {\n  const graphSettings = getAvailableGraphs(qs);\n  const pathFinderSettings = getAvailablePathfinders(qs);\n\n  return {\n    graphSettings,\n    pathFinderSettings\n  };\n}\n\n\nfunction getAvailableGraphs(qs) {\n  let graphs = [{\n    value: 'h3_face_uk',\n    name: 'Delhi (82K edges, 3.9 MB)'\n  },\n  // Commenting this out, as on mobile devices it may crash the browser.\n  //  {\n  //   value: 'tokyo-roads',\n  //   name: 'Tokyo (879K edges, 12.3 MB)'\n  // }\n];\n\n  return {\n    selected: qs.get('graph'),\n    graphs\n  };\n}\n\nfunction getAvailablePathfinders(qs) {\n  return {\n    selected: qs.get('finder') || 'dijkstra',\n    algorithms: [{\n      value: 'a-greedy-star',\n      name: 'Greedy A* (suboptimal)'\n    }, {\n      value: 'nba',\n      name: 'NBA*'\n    }, {\n      value: 'astar-uni',\n      name: 'Unidirectional A*'\n    }, {\n      value: 'dijkstra',\n      name: 'Dijkstra'\n    }]\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/settings.js","class RouteHandleViewModel {\r\n  constructor(pointChangedCallback, findNearestPoint) {\r\n    this.visible = false;\r\n    this.beingDragged = false;\r\n\r\n    this.pointId = -1;\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.r = 18;\r\n\r\n    this.pointChanged = pointChangedCallback;\r\n    this.findNearestPoint = findNearestPoint;\r\n  }\r\n\r\n  startDragging(scene, touchId = undefined) {\r\n    let self = this;\r\n    this.beingDragged = true;\r\n\r\n    document.addEventListener('mousemove', onMouseMove, true)\r\n    document.addEventListener('touchmove', onMouseMove, {\r\n      capture: true,\r\n      passive: false\r\n    })\r\n    document.addEventListener('touchend', onMouseUp, true)\r\n    document.addEventListener('touchcancel', onMouseUp, true)\r\n    document.addEventListener('mouseup', onMouseUp, true)\r\n\r\n    function onMouseMove(e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      let clientX, clientY;\r\n      if (e.touches) {\r\n        let mainTouch;\r\n        for(var i = 0; i < e.touches.length; ++i) {\r\n          if (e.touches[i].identifier === touchId) {\r\n            mainTouch = e.touches[i];\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (!mainTouch) return; // not us.\r\n\r\n        clientX = mainTouch.clientX;\r\n        clientY = mainTouch.clientY;\r\n      } else {\r\n        clientX = e.clientX;\r\n        clientY = e.clientY;\r\n      }\r\n\r\n      var s = scene.getSceneCoordinate(clientX, clientY);\r\n      self.x = s.x;\r\n      self.y = s.y;\r\n      let point = self.findNearestPoint(s.x, s.y);\r\n      self.pointId = point.id;\r\n      self.pointChanged(self)\r\n    }\r\n\r\n    function onMouseUp(e) {\r\n      if (e.touches && e.touches.length > 0) {\r\n        for(let i = 0; i < e.touches.length; ++i) {\r\n          let touch = e.touches[i];\r\n          if (touch.identifier === touchId) {\r\n            // we are in the list of active touches, so it wasn't us\r\n            return;\r\n          }\r\n        }\r\n      }\r\n\r\n      // if we got here, it means the user let go current handle\r\n      unsubscribe();\r\n    }\r\n\r\n    function unsubscribe() {\r\n      self.beingDragged = false;\r\n      document.removeEventListener('mousemove', onMouseMove, true);\r\n      document.removeEventListener('mouseup', onMouseUp, true);\r\n      document.removeEventListener('touchmove', onMouseMove, true)\r\n      document.removeEventListener('touchend', onMouseUp, true)\r\n      document.removeEventListener('touchcancel', onMouseUp, true)\r\n    }\r\n  }\r\n\r\n  setFrom(graphNode) {\r\n    this.visible = true;\r\n    this.pointId = graphNode.id;\r\n    this.x = graphNode.data.x;\r\n    this.y = graphNode.data.y;\r\n\r\n    this.pointChanged(this);\r\n  }\r\n  clear() {\r\n    this.visible = false;\r\n    this.pointId = -1;\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.pointChanged(this);\r\n  }\r\n\r\n  intersects(x, y, scale) {\r\n    if (!this.visible || this.beingDragged) return false;\r\n\r\n    let r = this.r / scale;\r\n    let dx = x - this.x;\r\n    let dy = y - this.y;\r\n    return (dx * dx + dy * dy) <= r * r;\r\n  }\r\n}\r\n\r\nmodule.exports = RouteHandleViewModel;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/RouteHandleViewModel.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-58b8de72\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-58b8de72\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\n\r\nVue.config.productionTip = false\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  template: '<App/>',\r\n  components: { App }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","const request = require('./request');\nconst endpoint = 'static/'\nconst createGraph = require('ngraph.graph');\nconst BBox = require('../BBox');\n\nconst asyncFor = require('rafor');\n\n\nmodule.exports = loadPositions;\n\nfunction loadPositions(fileName, progress) {\n  let graph = createGraph();\n  let points;\n  let links;\n  let graphBBox = new BBox();\n\n  // I used this smaller graph for testing\n  // return new Promise((resolve) => {\n  //   graph.addNode(1, { x: -100, y: 0 });\n  //   graph.addNode(2, { x: 100, y: 0 });\n  //   graph.addLink(1, 2);\n  //   points = [-100, 0, 100, 0];\n  //   links = [1, 2]\n  //   graphBBox.addPoint(-100, 0)\n  //   graphBBox.addPoint(100, 0)\n\n  //   progress.pointsReady = true;\n  //   progress.linksReady = true;\n  //   resolve({graph, points, links, graphBBox});\n  // })\n  return request(endpoint + `/${fileName}.co.bin`, {\n    responseType: 'arraybuffer',\n    progress: reportProgress('Loading intersection coordinates')\n  })\n    .then(setPositions)\n    .then(loadLinks)\n    .then(() => {\n      return {\n        graph, points, links, graphBBox\n      }\n    });\n\n  function setPositions(buffer) {\n    points = new Int32Array(buffer);\n    console.log('Downloaded nodes: ' + points.length/2);\n\n    return initNodes(points);\n  }\n\n  function initNodes(points) {\n    console.time('add nodes to graph');\n    progress.message = 'Adding nodes to graph'\n\n    return new Promise((resolve) => {\n      asyncFor(points, addPointToGraph, () => {\n        progress.pointsReady = true;\n        console.timeEnd('add nodes to graph');\n        resolve();\n      }, { step: 2 });\n\n      progress.pointsReady = true;\n    });\n  }\n\n  function addPointToGraph(x, i, points) {\n    let nodeId = Math.floor(i / 2);\n    let y = points[i + 1];\n    graph.addNode(nodeId, { x, y })\n    graphBBox.addPoint(x, y);\n\n    if (i % 500 === 0) {\n      progress.completed = Math.round(100 * i/points.length) + '%';\n    }\n  }\n\n\n  function loadLinks() {\n    return request(endpoint + `/${fileName}.gr.bin`, {\n      responseType: 'arraybuffer',\n      progress: reportProgress('Loading roads graph')\n    }).then(setLinks)\n  }\n\n  function setLinks(buffer) {\n    links = new Int32Array(buffer);\n\n    progress.message = 'Adding edges to graph'\n    console.time('add edges to graph');\n    return new Promise((resolve) => {\n      asyncFor(links, addLinkToGraph, () => {\n        console.timeEnd('add edges to graph');\n        progress.linksReady = true;\n        console.log(graph.getLinksCount() + ' edges; ' + graph.getNodesCount() + ' nodes.')\n        resolve();\n      }, { step: 3 });\n    });\n  }\n\n  function addLinkToGraph(fromShifted, i, links) {\n    let fromId = fromShifted - 1;\n    let toId = links[i + 1] - 1;\n    let weight = links[i + 2];\n\n    graph.addLink(fromId, toId,{weight: weight});\n\n    if (i % 500 === 0) {\n      progress.completed = Math.round(100 * i/links.length) + '%';\n    }\n  }\n\n\n  function reportProgress(name) {\n    return function(e) {\n      progress.message = name;\n      progress.completed = Math.round(e.percent * 100) + '%';\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/loadGraph.js","let wgl = require('w-gl');\r\n\r\n/**\r\n * Applies current transformation matrix to a given SVG group\r\n * element.\r\n */\r\nclass SVGContainer extends wgl.Element {\r\n\r\n  /**\r\n   * @param {SVGGElement} groupElement where transformation should be applied\r\n   * @param {Function} drawCallback a function that is called after each\r\n   * `draw()`\r\n   */\r\n  constructor(groupElement, drawCallback) {\r\n    super();\r\n    this.g = groupElement;\r\n    this.dx = 0;\r\n    this.dy = 0;\r\n    this.scale = 0;\r\n    this.drawCallback = drawCallback || noop;\r\n  }\r\n\r\n  draw() {\r\n    let transform = this.worldTransform;\r\n    if(transformsAreSame(this.worldTransform, this)) {\r\n      // Avoid DOM updates if possible.\r\n      return;\r\n    }\r\n    let pixelRatio = this.scene.getPixelRatio();\r\n\r\n    let scale = transform.scale/pixelRatio;\r\n    let dx = transform.dx/pixelRatio;\r\n    let dy = transform.dy/pixelRatio;\r\n\r\n    this.g.setAttributeNS(null, 'transform', `matrix(${scale}, 0, 0, ${scale}, ${dx}, ${dy})`);\r\n    this.scale = transform.scale;\r\n    this.dx = transform.dx;\r\n    this.dy = transform.dy;\r\n\r\n    this.drawCallback(this);\r\n  }\r\n}\r\n\r\nfunction transformsAreSame(world, ours) {\r\n  return world.scale == ours.scale &&\r\n         world.dx === ours.dx &&\r\n         world.dy === ours.dy;\r\n}\r\n\r\nmodule.exports = SVGContainer;\r\n\r\nfunction noop() {}\n\n\n// WEBPACK FOOTER //\n// ./src/SVGContainer.js","<template>\r\n  <div class='about'>\r\n    <div class='background absolute' @click.prevent='close'></div>\r\n    <div class='content'>\r\n      <h3>ngraph.path <a class='close bold' href='#' @click.prevent='close'>close</a></h3>\r\n      <p>\r\n        This website is a demo for the <a href='https://github.com/anvaka/ngraph.path' class='highlighted'>ngraph.path</a>\r\n        library. The library implements pathfinding algorithms for generic graphs (not limited to grids).\r\n      </p><p>\r\n        Don't use this website for actual navigation :).\r\n      </p>\r\n\r\n      <p>My goal was to build a very fast library, that could help many developers\r\n        find their paths. In my tests, the library showed great performance with median\r\n        path finding speed <span class='bold'>34ms</span> on <span class='bold'>733,844</span> edges graph.\r\n      </p>\r\n      <p>I built the roads graph for this demo using amazing <a href='http://www.openstreetmap.org/' target='_blank' class='highlighted'>OpenStreetMap</a>.\r\n      </p>\r\n      <ul>\r\n        <li>\r\n          <a href='https://github.com/anvaka/ngraph.path' class='highlighted'>Learn more </a> about this project on GitHub\r\n        </li><li>\r\n        Stay tuned for updates on <a href='https://twitter.com/anvaka' class='highlighted'>Twitter.</a>\r\n        </li><li>\r\n        <a href='https://www.youtube.com/watch?v=hGeZuIEV6KU' class='highlighted'> Watch a video</a> demo.\r\n        </li>\r\n      </ul>\r\n      <p>With passion,<br/> Anvaka</p>\r\n      <a href='#' @click.prevent='close' class='large-close bold'>\r\n        close\r\n      </a>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nexport default {\r\n  mounted() {\r\n    this.closeHandler = (e) => {\r\n      if (e.keyCode === 27) {\r\n        e.preventDefault();\r\n        this.close();\r\n      }\r\n    }\r\n    document.addEventListener('keyup', this.closeHandler);\r\n  },\r\n  beforeDestroy() {\r\n    document.removeEventListener('keyup', this.closeHandler);\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.$emit('close');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='stylus'>\r\n.about {\r\n  position: absolute;\r\n  overflow-y: auto;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n\r\n  .close {\r\n    position: absolute;\r\n    right: 15px;\r\n    font-size: 12px;\r\n  }\r\n\r\n  .large-close {\r\n    width: 100%;\r\n    height: 32px;\r\n    display: block;\r\n    text-align: center;\r\n  }\r\n\r\n  .content {\r\n    color: hsla(215, 37%, 55%, 1);\r\n    position: absolute;\r\n    background-color: hsla(215, 74%, 18%, 1.0);\r\n    width: 400px;\r\n    padding: 14px;\r\n    border: 1px solid hsla(215, 37%, 55%, 1);\r\n    h3 {\r\n      margin: 0;\r\n      font-weight: normal;\r\n    }\r\n  }\r\n}\r\n\r\n.background {\r\n  position: absolute;\r\n  background-color: hsla(215, 74%, 18%, 0.8);\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n@media (max-width: 800px) {\r\n  .about {\r\n    justify-content: initial;\r\n  }\r\n  .about .content {\r\n    width: 100%;\r\n    border: none;\r\n  }\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/About.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6579c796\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./About.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./About.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./About.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6579c796\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./About.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/About.vue\n// module id = c27y\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('canvas',{ref:\"canvas\",staticClass:\"absolute\"}),_vm._v(\" \"),(!_vm.webGLEnabled)?_c('div',[_vm._m(0)]):_vm._e(),_vm._v(\" \"),(_vm.webGLEnabled)?_c('div',[_c('svg',{ref:\"svg\",staticClass:\"svg-overlay absolute\"},[_c('g',{staticClass:\"scene\"},[_c('path',{ref:\"foundPath\",attrs:{\"d\":_vm.pathInfo.svgPath,\"stroke-width\":\"6x\",\"stroke\":\"red\",\"fill\":\"transparent\"}}),_vm._v(\" \"),(_vm.routeStart.visible)?_c('route-point',{attrs:{\"point\":_vm.routeStart,\"scale\":_vm.scale,\"r\":_vm.routeStart.r,\"symbol\":\"A\",\"fontSize\":28}}):_vm._e(),_vm._v(\" \"),(_vm.routeEnd.visible)?_c('route-point',{attrs:{\"point\":_vm.routeEnd,\"scale\":_vm.scale,\"r\":_vm.routeEnd.r,\"symbol\":\"B\",\"fontSize\":28}}):_vm._e()],1)]),_vm._v(\" \"),(_vm.progress.visible)?_c('div',{staticClass:\"progress center absolute\"},[(!_vm.progress.errorMessage)?_c('div',[_vm._v(\"\\n        \"+_vm._s(_vm.progress.message)+\" \"+_vm._s(_vm.progress.completed)+\"\\n      \")]):_vm._e(),_vm._v(\" \"),(_vm.progress.errorMessage)?_c('div',{staticClass:\"error\"},[_c('div',[_vm._v(_vm._s(_vm.progress.errorMessage))]),_vm._v(\" \"),_c('div',{staticClass:\"error-details\"},[_vm._v(_vm._s(_vm.progress.errorDetails))])]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.loaded && !_vm.progress.visible)?_c('div',{staticClass:\"controls absolute\"},[(_vm.helpVisible)?_c('div',{staticClass:\"help\"},[_vm._v(\"\\n        \"+_vm._s(_vm.getHelpText())+\"\\n      \")]):_vm._e(),_vm._v(\" \"),(!_vm.helpVisible)?_c('div',{staticClass:\"route-info-container\"},[_c('svg',{staticClass:\"route-info\",attrs:{\"viewBox\":\"0 0 400 40\"},on:{\"click\":function($event){$event.preventDefault();_vm.detailsVisible = !_vm.detailsVisible}}},[_c('g',[_c('path',{attrs:{\"d\":\"M20,20 L80,20 M290,20 L350,20\",\"stroke-width\":\"4\",\"stroke\":\"red\",\"fill\":\"transparent\"}}),_vm._v(\" \"),_c('route-point',{attrs:{\"point\":{x: 20, y: 20},\"scale\":1,\"r\":12,\"symbol\":\"A\",\"fontSize\":12,\"strokeWidth\":1,\"textY\":4}}),_vm._v(\" \"),_c('route-point',{attrs:{\"point\":{x: 350, y: 20},\"scale\":1,\"r\":12,\"symbol\":\"B\",\"fontSize\":12,\"strokeWidth\":1,\"textY\":4}}),_vm._v(\" \"),_c('text',{attrs:{\"x\":\"185.5\",\"y\":\"25\",\"fill\":\"white\",\"text-anchor\":\"middle\",\"font-size\":\"18px\"}},[_vm._v(_vm._s(_vm.pathText))])],1),_vm._v(\" \"),_c('g',[(!_vm.detailsVisible)?_c('path',{attrs:{\"d\":\"M372,15 L388,15 380.5,28z\",\"stroke-width\":\"0\",\"stroke\":\"white\",\"fill\":\"hsl(215, 34%, 64%)\"}}):_vm._e(),_vm._v(\" \"),(_vm.detailsVisible)?_c('path',{attrs:{\"d\":\"M372,28 L388,28 380.5,15z\",\"stroke-width\":\"0\",\"stroke\":\"white\",\"fill\":\"hsl(215, 34%, 64%)\"}}):_vm._e()])]),_vm._v(\" \"),_c('a',{staticClass:\"reset\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.clearRoute($event)}}},[_vm._v(\"clear\")])]):_vm._e(),_vm._v(\" \"),(_vm.detailsVisible && !_vm.helpVisible)?_c('div',{staticClass:\"details\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Path length:\")]),_vm._v(\" \"),_c('div',{staticClass:\"col\"},[_vm._v(_vm._s(_vm.stats.pathLength))])]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Path finder:\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pathFinder.selected),expression:\"pathFinder.selected\"}],staticClass:\"col\",on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.pathFinder, \"selected\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},_vm.updateSearchAlgorithm]}},_vm._l((_vm.pathFinder.algorithms),function(algorithm){return _c('option',{domProps:{\"value\":algorithm.value}},[_vm._v(_vm._s(algorithm.name))])}),0)])]):_vm._e()]):_vm._e(),_vm._v(\" \"),(!_vm.progress.visible)?_c('div',{staticClass:\"graph-name\",attrs:{\"title\":_vm.graphNameTitle}},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.graphSettings.selected),expression:\"graphSettings.selected\"}],staticClass:\"col\",on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.graphSettings, \"selected\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},_vm.updateGraph]}},_vm._l((_vm.graphSettings.graphs),function(graph){return _c('option',{domProps:{\"value\":graph.value}},[_vm._v(_vm._s(graph.name))])}),0)]):_vm._e()]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"about-line\"},[_c('a',{staticClass:\"about-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.aboutVisible = true}}},[_vm._v(\"about...\")]),_vm._v(\" \"),_c('a',{staticClass:\"bold\",attrs:{\"href\":\"http://github.com/anvaka/ngraph.path\"}},[_vm._v(\"source code\")])]),_vm._v(\" \"),(!_vm.progress.visible && _vm.graphSettings.selected !== \"USA-road-d.NY\")?_c('div',{staticClass:\"osm-note\"},[_vm._v(\"\\n    Graph was extracted from \"),_c('a',{attrs:{\"href\":\"https://www.openstreetmap.org\",\"target\":\"_blank\"}},[_vm._v(\"www.openstreetmap.org\")]),_vm._v(\".\\n    It is made available under \"),_c('a',{attrs:{\"href\":\"https://opendatacommons.org/licenses/odbl/summary/\",\"target\":\"_blank\"}},[_vm._v(\"ODbL\")])]):_vm._e(),_vm._v(\" \"),(_vm.aboutVisible)?_c('about',{on:{\"close\":function($event){_vm.aboutVisible = false}}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"absolute no-webgl\"},[_c('h4',[_vm._v(\"WebGL is not enabled :(\")]),_vm._v(\" \"),_c('div',[_vm._v(\"While \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"ngraph.path\")]),_vm._v(\" does not require any webgl, this demo needs it.\")]),_vm._v(\" \"),_c('iframe',{staticClass:\"video-demo\",attrs:{\"src\":\"https://www.youtube.com/embed/hGeZuIEV6KU\",\"frameborder\":\"0\",\"allowfullscreen\":\"\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-58b8de72\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = gwfe\n// module chunks = 1","<template>\r\n  <g :transform='screenScale'>\r\n    <circle :r='r' fill='red' stroke='white' :stroke-width='strokeWidth' ></circle>\r\n    <text :font-size='fontSize' fill='white' text-anchor='middle' :y='textY' class='no-pointer'>{{symbol}}</text>\r\n  </g>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'RoutePoint',\r\n  props: {\r\n    point: Object,\r\n    scale: Number,\r\n    symbol: String,\r\n    r: Number,\r\n    strokeWidth: {\r\n      type: Number,\r\n      default: 2\r\n    },\r\n    fontSize: {\r\n      type: Number,\r\n      default: 28\r\n    },\r\n    textY: {\r\n      type: Number,\r\n      default: 10\r\n    }\r\n  },\r\n  computed: {\r\n    screenScale() {\r\n      let scale = 1/this.scale;\r\n      let dx = this.point.x;\r\n      let dy = this.point.y;\r\n      return `matrix(${scale}, 0, 0, ${scale}, ${dx}, ${dy})`;\r\n    },\r\n  }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/RoutePoint.vue","class Progress {\r\n  constructor() {\r\n    this.reset();\r\n  }\r\n\r\n  get visible() {\r\n    return !(this.pointsReady && this.linksReady && this.treeReady);\r\n  }\r\n\r\n  setError(errorMessage, details) {\r\n    this.errorMessage = errorMessage;\r\n    this.errorDetails = details;\r\n  }\r\n\r\n  reset() {\r\n    this.errorMessage = null;\r\n    this.errorDetails = null;\r\n    this.message = '';\r\n    this.completed = '';\r\n    this.pointsReady = false;\r\n    this.linksReady = false;\r\n    this.treeReady = false;\r\n  }\r\n}\r\n\r\nmodule.exports = Progress;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Progress.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoutePoint.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoutePoint.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a925d368\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./RoutePoint.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/RoutePoint.vue\n// module id = qEFR\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{attrs:{\"transform\":_vm.screenScale}},[_c('circle',{attrs:{\"r\":_vm.r,\"fill\":\"red\",\"stroke\":\"white\",\"stroke-width\":_vm.strokeWidth}}),_vm._v(\" \"),_c('text',{staticClass:\"no-pointer\",attrs:{\"font-size\":_vm.fontSize,\"fill\":\"white\",\"text-anchor\":\"middle\",\"y\":_vm.textY}},[_vm._v(_vm._s(_vm.symbol))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a925d368\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/RoutePoint.vue\n// module id = qK1r\n// module chunks = 1","module.exports = request;\r\n\r\nfunction request(url, options) {\r\n  if (!options) options = {};\r\n\r\n  return new Promise(download);\r\n\r\n  function download(resolve, reject) {\r\n    var req = new XMLHttpRequest();\r\n\r\n    if (typeof options.progress === 'function') {\r\n      req.addEventListener(\"progress\", updateProgress, false);\r\n    }\r\n\r\n    req.addEventListener(\"load\", transferComplete, false);\r\n    req.addEventListener(\"error\", transferFailed, false);\r\n    req.addEventListener(\"abort\", transferCanceled, false);\r\n\r\n    req.open('GET', url);\r\n    if (options.responseType) {\r\n      req.responseType = options.responseType;\r\n    }\r\n    req.send(null);\r\n\r\n    function updateProgress(e) {\r\n      if (e.lengthComputable) {\r\n        options.progress({\r\n          loaded: e.loaded,\r\n          total: e.total,\r\n          percent: e.loaded / e.total\r\n        });\r\n      }\r\n    }\r\n\r\n    function transferComplete() {\r\n      if (req.status !== 200) {\r\n        reject(`Unexpected status code ${req.status} when calling ${url}`);\r\n        return;\r\n      }\r\n      var response = req.response;\r\n\r\n      if (options.responseType === 'json' && typeof response === 'string') {\r\n        // IE\r\n        response = JSON.parse(response);\r\n      }\r\n\r\n      resolve(response);\r\n    }\r\n\r\n    function transferFailed() {\r\n      reject(`Failed to download ${url}`);\r\n    }\r\n\r\n    function transferCanceled() {\r\n      reject(`Cancelled download of ${url}`);\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/request.js","<template>\r\n  <div id=\"app\">\r\n    <canvas ref='canvas' class='absolute'></canvas>\r\n    <div v-if='!webGLEnabled'>\r\n      <div class='absolute no-webgl'>\r\n        <h4>WebGL is not enabled :(</h4>\r\n        <div>While <a href='https://github.com/anvaka/ngraph.path' class='highlighted'>ngraph.path</a> does not require any webgl, this demo needs it.</div>\r\n        <iframe src=\"https://www.youtube.com/embed/hGeZuIEV6KU\" frameborder=\"0\" allowfullscreen class='video-demo'></iframe>\r\n      </div>\r\n    </div>\r\n    <div v-if='webGLEnabled'>\r\n      <svg ref='svg' class='svg-overlay absolute'>\r\n        <g class='scene'>\r\n          <path ref='foundPath' :d='pathInfo.svgPath' stroke-width='6x' stroke='red' fill=\"transparent\" ></path>\r\n          <route-point :point='routeStart' :scale='scale' :r='routeStart.r' symbol='A' v-if='routeStart.visible' :fontSize='28'></route-point>\r\n          <route-point :point='routeEnd' :scale='scale' :r='routeEnd.r' symbol='B' v-if='routeEnd.visible' :fontSize='28'></route-point>\r\n        </g>\r\n      </svg>\r\n      <div class='progress center absolute' v-if='progress.visible'>\r\n        <div v-if='!progress.errorMessage'>\r\n          {{progress.message}} {{progress.completed}}\r\n        </div>     \r\n        <div v-if='progress.errorMessage' class='error'>\r\n          <div>{{progress.errorMessage}}</div>\r\n          <div class='error-details'>{{progress.errorDetails}}</div>\r\n        </div>\r\n      </div>\r\n      <div class='controls absolute' v-if='loaded && !progress.visible'>\r\n        <div class='help' v-if='helpVisible'>\r\n          {{getHelpText()}}\r\n        </div>\r\n        <div class='route-info-container' v-if='!helpVisible' >\r\n          <svg class='route-info' viewBox='0 0 400 40'  @click.prevent='detailsVisible = !detailsVisible'>\r\n            <g>\r\n              <path d='M20,20 L80,20 M290,20 L350,20' stroke-width='4' stroke='red' fill=\"transparent\" ></path>\r\n              <route-point :point='{x: 20, y: 20}' :scale='1' :r='12' symbol='A' :fontSize='12' :strokeWidth='1' :textY='4' ></route-point>\r\n              <route-point :point='{x: 350, y: 20}' :scale='1' :r='12' symbol='B' :fontSize='12' :strokeWidth='1' :textY='4'></route-point>\r\n              <text x='185.5' y='25' fill='white' text-anchor='middle' font-size='18px'>{{pathText}}</text>\r\n            </g>\r\n            <g>\r\n              <path d='M372,15 L388,15 380.5,28z' stroke-width='0' stroke='white' fill=\"hsl(215, 34%, 64%)\" v-if='!detailsVisible'></path>\r\n              <path d='M372,28 L388,28 380.5,15z' stroke-width='0' stroke='white' fill=\"hsl(215, 34%, 64%)\" v-if='detailsVisible'></path>\r\n            </g>\r\n          </svg>\r\n          <a href='#' @click.prevent='clearRoute' class='reset'>clear</a>\r\n        </div>\r\n        <div v-if='detailsVisible && !helpVisible' class='details'>\r\n          <div class='row'>\r\n            <div class='label'>Path length:</div>\r\n            <div class='col'>{{stats.pathLength}}</div>\r\n          </div>\r\n          <div class='row'>\r\n            <div class='label'>Path finder:</div>\r\n            <select class='col' v-model='pathFinder.selected' @change='updateSearchAlgorithm'>\r\n              <option v-for='algorithm in pathFinder.algorithms' :value='algorithm.value'>{{algorithm.name}}</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class='graph-name' v-if='!progress.visible' :title='graphNameTitle'>\r\n          <select class='col' v-model='graphSettings.selected' @change='updateGraph'>\r\n            <option v-for='graph in graphSettings.graphs' :value='graph.value'>{{graph.name}}</option>\r\n          </select>\r\n      </div>\r\n    </div>\r\n    <div class='about-line'>\r\n      <a class='about-link' href='#' @click.prevent='aboutVisible = true'>about...</a>\r\n      <a class='bold' href='http://github.com/anvaka/ngraph.path'>source code</a>\r\n    </div>\r\n    <div class='osm-note' v-if='!progress.visible && graphSettings.selected !== \"USA-road-d.NY\"'>\r\n      Graph was extracted from <a href='https://www.openstreetmap.org' target='_blank'>www.openstreetmap.org</a>.\r\n      It is made available under <a href='https://opendatacommons.org/licenses/odbl/summary/' target='_blank'>ODbL</a>\r\n    </div>\r\n    <about v-if='aboutVisible' @close='aboutVisible = false'></about>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from './appModel';\r\nimport SVGContainer from './SVGContainer';\r\nimport RoutePoint from './components/RoutePoint';\r\nimport About from './components/About';\r\n\r\nconst bus = require('./bus');\r\nconst wgl = require('w-gl');\r\n\r\nexport default {\r\n  name: 'app',\r\n  components: {\r\n    RoutePoint,\r\n    About\r\n  },\r\n  mounted() {\r\n    this.webGLEnabled = wgl.isWebGLEnabled(this.$refs.canvas);\r\n    if (!this.webGLEnabled) {\r\n      // TODO: Maybe render something smaller with SVG?\r\n      return;\r\n    }\r\n\r\n    api.loadPositions()\r\n    bus.on('graph-loaded', this.createScene, this);\r\n  },\r\n  beforeDestroy() {\r\n    bus.off('graph-loaded', this.createScene);\r\n    this.ensurePreviousSceneDestroyed();\r\n  },\r\n  data() {\r\n    return {\r\n      webGLEnabled: true,\r\n      loaded: false,\r\n      detailsVisible: false,\r\n      progress: api.progress,\r\n      routeStart: api.routeStart,\r\n      routeEnd: api.routeEnd,\r\n      stats: api.stats,\r\n      scale: 1,\r\n      pathInfo: api.pathInfo,\r\n      pathFinder: api.pathFinderSettings,\r\n      graphSettings: api.graphSettings,\r\n      aboutVisible: false\r\n    }\r\n  },\r\n  computed: {\r\n    graphNameTitle() {\r\n      let stats = this.stats;\r\n      if (!stats) return '';\r\n\r\n      return stats.graphNodeCount + ' nodes; ' + stats.graphLinksCount + ' edges';\r\n    },\r\n    helpVisible() {\r\n      return !(this.routeStart.visible && this.routeEnd.visible);\r\n    },\r\n    pathText() {\r\n      if (this.pathInfo.noPath) {\r\n        return 'No path (' + this.stats.lastSearchTook + ')';\r\n      }\r\n      return 'Found in: ' + this.stats.lastSearchTook;\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    clearRoute() {\r\n      api.clearRoute();\r\n    },\r\n    getHelpText() {\r\n      if (!this.routeStart.visible) {\r\n        return 'Click anywhere to select starting point';\r\n      } else if (!this.routeEnd.visible) {\r\n        return 'Click anywhere to select destination';\r\n      }\r\n    },\r\n\r\n    ensurePreviousSceneDestroyed() {\r\n      if (this.scene) {\r\n        this.scene.dispose();\r\n        this.scene = null;\r\n      }\r\n      if (this.unsubscribeMoveEvents) {\r\n        this.unsubscribeMoveEvents();\r\n        this.unsubscribeMoveEvents = null;\r\n      }\r\n    },\r\n\r\n    createScene() {\r\n      this.ensurePreviousSceneDestroyed();\r\n\r\n      let canvas = this.$refs.canvas;\r\n      this.loaded = true;\r\n\r\n      this.scene = wgl.scene(canvas);\r\n      // this.scene.setPixelRatio(2);\r\n      let scene = this.scene;\r\n      let svgConntainer = new SVGContainer(this.$refs.svg.querySelector('.scene'), this.updateSVGElements.bind(this));\r\n      this.scene.appendChild(svgConntainer)\r\n      scene.setClearColor(12/255, 41/255, 82/255, 1)\r\n      //scene.setClearColor(1, 1, 1, 1)\r\n\r\n      let bbox = api.getGraphBBox();\r\n      let initialSceneSize = bbox.width/8;\r\n      scene.setViewBox({\r\n        left:  -initialSceneSize,\r\n        top:   -initialSceneSize,\r\n        right:  initialSceneSize,\r\n        bottom: initialSceneSize,\r\n      })\r\n\r\n      let graph = api.getGraph();\r\n\r\n      let linksCount = graph.getLinksCount();\r\n      let lines = new wgl.WireCollection(linksCount);\r\n      lines.color = {r: 0.8, g: 0.8, b: 0.8, a: 0.7}\r\n      // lines.color = {r: 0.1, g: 0.1, b: 0.1, a: 0.9}\r\n      graph.forEachLink(function (link) {\r\n        let from = graph.getNode(link.fromId).data;\r\n        let to = graph.getNode(link.toId).data\r\n\r\n        lines.add({ from, to });\r\n      });\r\n\r\n      scene.appendChild(lines);\r\n\r\n      scene.on('mousemove', this.onMouseMoveOverScene, this);\r\n      scene.on('click', this.onSceneClick, this);\r\n\r\n      let boundMouseDown = this.handleMouseDown.bind(this);\r\n      document.body.addEventListener('mousedown', boundMouseDown, true);\r\n      document.body.addEventListener('touchstart', boundMouseDown, true);\r\n\r\n      this.unsubscribeMoveEvents = function() {\r\n        document.body.removeEventListener('mousedown', boundMouseDown, true);\r\n        document.body.removeEventListener('touchstart', boundMouseDown, true);\r\n      }\r\n    },\r\n\r\n    updateSVGElements(svgConntainer) {\r\n      let strokeWidth = 6/svgConntainer.scale;\r\n      this.$refs.foundPath.setAttributeNS(null, 'stroke-width', strokeWidth + 'px');\r\n      this.scale = svgConntainer.scale / this.scene.getPixelRatio();\r\n    },\r\n\r\n    handleMouseDown(e) {\r\n      var s;\r\n      var touchId = undefined;\r\n      if (e.touches) {\r\n        let mainTouch = (e.changedTouches || e.touches)[0];\r\n        s = this.scene.getSceneCoordinate(mainTouch.clientX, mainTouch.clientY);\r\n        touchId = mainTouch.identifier;\r\n      } else {\r\n        s = this.scene.getSceneCoordinate(e.clientX, e.clientY);\r\n      }\r\n\r\n      let handleUnderCursor = api.getRouteHandleUnderCursor({\r\n        sceneX: s.x,\r\n        sceneY: s.y\r\n      }, this.scene);\r\n      if (handleUnderCursor) {\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n        handleUnderCursor.startDragging(this.scene, touchId);\r\n        return;\r\n      }\r\n    },\r\n\r\n    updateGraph() {\r\n      this.ensurePreviousSceneDestroyed();\r\n      setTimeout(() => {\r\n        api.updateSelectedGraph();\r\n      }, 0);\r\n    },\r\n\r\n    updateSearchAlgorithm() {\r\n      api.updateSearchAlgorithm();\r\n    },\r\n\r\n    onSceneClick(e) {\r\n      api.handleSceneClick(e);\r\n    },\r\n\r\n    onMouseMoveOverScene(e) {\r\n      let now = new Date();\r\n      let handle = api.getRouteHandleUnderCursor(e, this.scene);\r\n      if (handle !== this.prevHandle) {\r\n        this.$refs.canvas.style.cursor = handle ? 'pointer' : ''\r\n        this.prevHandle = handle;\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='stylus'>\r\n.absolute {\r\n  position: absolute;\r\n}\r\n\r\ncanvas {\r\n  width: 100%;\r\n  height: 100%;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n.progress {\r\n  color: white;\r\n  padding: 0 14px;\r\n  font-size: 24px;\r\n}\r\n\r\n.center {\r\n  display: flex;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n}\r\n\r\n.no-webgl {\r\n  width: 100%;\r\n  color: hsla(215, 37%, 55%, 1);\r\n  flex-direction: column;\r\n  text-align: center;\r\n  padding: 12px;\r\n\r\n  .video-demo {\r\n    margin-top: 20px;\r\n    width: 853px;\r\n    height: 480px;\r\n  }\r\n\r\n  h4 {\r\n    margin: 7px 0;\r\n    font-size: 24px;\r\n  }\r\n}\r\n\r\n.controls {\r\n  width: 440px;\r\n  top: 0;\r\n  margin: 14px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: hsla(215, 74%, 18%, 1);\r\n  color: hsla(215, 37%, 55%, 1);\r\n  border: 1px solid hsla(215, 37%, 55%, 1);\r\n}\r\n\r\n.actions {\r\n  height: 40px;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n.help {\r\n  height: 40px;\r\n  padding:10px;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  color: white;\r\n}\r\n.direction-switch {\r\n  display: flex;\r\n  height: 100%;\r\n  flex: 1;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\na {\r\n  text-decoration: none;\r\n}\r\n\r\na.direction-switch {\r\n  color: hsla(215, 37%, 55%, 1);\r\n}\r\na.highlighted {\r\n  color: white;\r\n  border-bottom: 1px dashed white;\r\n}\r\n.stats {\r\n  padding: 4px;\r\n  position: absolute;\r\n  background-color: hsla(215, 74%, 18%, 1);\r\n  margin: 14px;\r\n  bottom: 0;\r\n  font-size: 12px;\r\n  color: hsla(215, 37%, 55%, 1);\r\n}\r\n\r\n.bold {\r\n  color: hsla(215, 37%, 85%, 1);\r\n}\r\n\r\n.row {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: baseline;\r\n  height: 32px;\r\n}\r\n.col {\r\n  flex: 1\r\n}\r\n\r\n.details {\r\n  padding: 8px 14px;\r\n}\r\n\r\nselect {\r\n  background: transparent;\r\n  border: none;\r\n  color: hsla(215, 37%, 85%, 1);\r\n  appearance: none;\r\n  font-size: 14px;\r\n  border-bottom: 1px dashed;\r\n  border-radius: 0;\r\n  padding-bottom: 4px;\r\n}\r\n\r\noption {\r\n  color: black;\r\n}\r\n\r\nsvg text {\r\n  pointer-events: none;\r\n  user-select: none;\r\n}\r\nselect:focus {\r\n  outline: none;\r\n}\r\n\r\n.about-line {\r\n  display: flex;\r\n  position: absolute;\r\n  width: 350px;\r\n  left: 50%;\r\n  bottom: 0;\r\n  padding: 7px 12px;\r\n  background-color: hsla(215, 74%, 18%, 0.8);\r\n  transform: translateX(-50%);\r\n  a {\r\n    flex: 1;\r\n    text-align: center;\r\n  }\r\n}\r\n\r\na.about-link {\r\n    color: hsla(215, 37%, 85%, 1);\r\n    font-size: 16px;\r\n}\r\n\r\n.graph-name {\r\n  position: absolute;\r\n  bottom: 42px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background-color: hsla(215, 74%, 18%, 0.8);\r\n  padding: 0 10px;\r\n  select {\r\n    font-size: 24px;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.osm-note {\r\n    position: absolute;\r\n    color: #6285b7;\r\n    width: 290px;\r\n    background-color: hsla(215, 74%, 18%, 0.8);\r\n    font-size: 11px;\r\n    text-align: right;\r\n    top: 14px;\r\n    right: 14px;\r\n    a {\r\n      color: #6285b7;\r\n    }\r\n}\r\n\r\n@media (max-width: 800px) {\r\n  .osm-note {\r\n    // The screen size is too small for this. Visitors can read it\r\n    // in the about page.\r\n    display: none;\r\n  }\r\n  .progress {\r\n    font-size: 18px;\r\n  }\r\n  .about-line {\r\n    width: 100%;\r\n    bottom: 0;\r\n  }\r\n\r\n  .details {\r\n    padding: 5px;\r\n  }\r\n  .controls {\r\n    width: 100%;\r\n    margin: 0;\r\n  }\r\n  .stats {\r\n    margin: 0;\r\n    bottom: 0px;\r\n    top: auto;\r\n  }\r\n\r\n  a.about-link {\r\n    bottom: 0;\r\n    padding-bottom: 4px;\r\n  }\r\n\r\n  .no-webgl {\r\n    .video-demo {\r\n      width: 560px;\r\n      height: 315px;\r\n    }\r\n  }\r\n\r\n  .direction-switch {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n@media (max-width: 600px) {\r\n  .no-webgl {\r\n    padding: 0;\r\n    div {\r\n      padding: 7px;\r\n    }\r\n    .video-demo {\r\n      width: 100%;\r\n      height: 300px;\r\n    }\r\n  }\r\n  .graph-name {\r\n    bottom: 48px;\r\n    select {\r\n      font-size: 16px;\r\n    }\r\n  }\r\n}\r\n\r\nsvg.svg-overlay {\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  pointer-events: none;\r\n  background: transparent;\r\n}\r\n\r\n.route-info-container {\r\n  display: flex;\r\n}\r\n\r\nsvg.route-info {\r\n  flex: 1;\r\n  height: 40px;\r\n  cursor: pointer;\r\n  width: 100%;\r\n  margin-left: 7px;\r\n}\r\n\r\na.reset {\r\n  color: hsla(215, 37%, 85%, 1);\r\n  font-size: small;\r\n  padding: 0 10px;\r\n  display: block;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n\r\n.label {\r\n  width: 100px;\r\n  flex-shrink: 0;\r\n  padding-right: 7px;\r\n}\r\n.no-pointer {\r\n  pointer-events: none;\r\n}\r\n\r\n.error {\r\n  color:deeppink;\r\n}\r\n.error-details {\r\n  font-family: monospace;\r\n  text-align: left;\r\n}\r\n\r\na::selection,\r\nh3::selection,\r\nh4::selection,\r\ndiv::selection,\r\np::selection {\r\n  background: #d03094;\r\n  color: white;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue"],"sourceRoot":""}